DATAS SEGMENT
    DT1 DB 5CH
    DT2 DB ?
    X1 DB 'Binary:  $'
    X2 DB 'Decimal:	$'
    X3 DB 'Hexadecimal:	$'
    X4 DB 'Fracton:	$'
    X5 DB ' . $'
DATAS ENDS

STACKS SEGMENT
    STACK DB 100 DUP(?)
STACKS ENDS

CODES SEGMENT
    ASSUME CS:CODES,DS:DATAS,SS:STACKS
MAIN PROC FAR
    MOV AX,DATAS
    MOV DS,AX
INPUT:MOV AH,01H
    INT 21H
    PUSH AX
    MOV DL,0AH
    MOV AH,02H
    INT 21H
    MOV DL,0DH
    INT 21H
    POP AX
    CMP AL,31H
    JZ FUNCTION1
    CMP AL,32H
    JZ FUNCTION2
    CMP AL,33H
    JZ FUNCTION3
    JMP INPUT
FUNCTION1:MOV DX,290H
	OUT DX,AL
	CALL DELAY1
	IN AL,DX
	MOV BX,OFFSET DT1
	MOV [BX],AL
    CALL BINARY
    CALL DECIMAL
    CALL HEXADECIMAL
    CALL FRACTION
	CALL DELAY2
	MOV DL,0FFH
	MOV AH,06H
	INT 21H
	CMP AL,0DH
	JZ EXIT
	JMP FUNCTION1
FUNCTION2:MOV DX,290H
	OUT DX,AL
	CALL DELAY1
	IN AL,DX
	MOV BX,OFFSET DT1
	MOV [BX],AL
	CALL BINARY
    CALL DECIMAL
    CALL HEXADECIMAL
    CALL FRACTION
AGAIN:MOV AH,01H
	INT 21H
	CMP AL,1BH
	JZ EXIT
	CMP AL,20H
	JZ FUNCTION2
	JMP AGAIN
FUNCTION3:MOV DX,290H
	OUT DX,AL
	CALL DELAY1
	IN AL,DX
	MOV BX,OFFSET DT1
	MOV [BX],AL
	MOV DT2,AL
	CALL BINARY
    CALL DECIMAL
    CALL HEXADECIMAL
    CALL FRACTION
    CALL DELAY2
AGAIN2:MOV DX,290H
	OUT DX,AL
	CALL DELAY1
	IN AL,DX
	MOV BX,OFFSET DT1
	MOV [BX],AL
	CMP AL,DT2
	JZ AGAIN3
	CALL BINARY
    CALL DECIMAL
    CALL HEXADECIMAL
    CALL FRACTION
AGAIN3:CALL DELAY2
	MOV DL,0FFH
	MOV AH,06H
	INT 21H
	CMP AL,0DH
	JZ EXIT
	JMP AGAIN2
EXIT:MOV AH,01H
	INT 21H
	CMP AL,0DH
	JNZ INPUT
    MOV AH,4CH
    INT 21H
MAIN ENDP

BINARY PROC FAR
	MOV DX,OFFSET X1
	MOV AH,9H
	INT 21H
	MOV AL,DT1
	MOV CX,8
BICYCLE:ROL AL,1
	MOV DL,AL
	AND DL,01H
	ADD DL,30H
	MOV AH,2
	PUSH AX
	INT 21H
	POP AX
	LOOP BICYCLE
	MOV DL,0AH
    MOV AH,02H
    INT 21H
    MOV DL,0DH
    MOV AH,02H
    INT 21H
	RET
BINARY ENDP

HEXADECIMAL PROC FAR
	MOV DX,OFFSET X3
	MOV AH,9H
	INT 21H
	MOV AL,DT1
	MOV BL,2
HEXADECICYCLE:MOV CL,4
	ROL AL,CL
	MOV DL,AL
	AND DL,0FH
	ADD DL,30H
	CMP DL,39H
	JBE PRINT
	ADD DL,7
PRINT:MOV AH,2
	PUSH AX
	INT 21H
	POP AX
	DEC BL
	JNZ HEXADECICYCLE
	MOV DL,0AH
    MOV AH,02H
    INT 21H
    MOV DL,0DH
    MOV AH,02H
    INT 21H
	RET
HEXADECIMAL ENDP

DECIMAL PROC FAR
	MOV DX,OFFSET X2
	MOV AH,9H
	INT 21H
	XOR AX,AX
	MOV AL,DT1
	XOR CX,CX
	MOV DL,10
KEEP:XOR AH,AH
	DIV DL
	PUSH AX
	INC CX
	CMP AL,9D
	JA KEEP
	ADD AL,30H
	MOV DL,AL
	MOV AH,02H
	INT 21H
NEXT:POP BX
	ADD BH,30H
	MOV DL,BH
	MOV AH,02H
	INT 21H
	LOOP NEXT
	MOV DL,0AH
    MOV AH,02H
    INT 21H
    MOV DL,0DH
    MOV AH,02H
    INT 21H
	RET
DECIMAL ENDP

FRACTION PROC FAR
	MOV DX,OFFSET X4
	MOV AH,9H
	INT 21H
	MOV AL,DT1
	MOV BL,5
	MUL BL
	MOV BL,255D
	DIV BL
	MOV DL,AL
	ADD DL,30H
	PUSH AX
	MOV AH,2H
	INT 21H
	MOV DX,OFFSET X5
	MOV AH,9H
	INT 21H
	POP AX
	MOV AL,AH
	MOV BL,10
	MUL BL
	MOV BL,255D
	DIV BL
	MOV DL,AL
	ADD DL,30H
	PUSH AX
	MOV AH,2H
	INT 21H
	POP AX
	MOV AL,AH
	MOV BL,10
	MUL BL
	MOV BL,255D
	DIV BL
	MOV DL,AL
	ADD DL,30H
	MOV AH,2H
	INT 21H
	MOV DL,0AH
    MOV AH,02H
    INT 21H
    MOV DL,0DH
    MOV AH,02H
    INT 21H
	RET
FRACTION ENDP

DELAY1 PROC FAR
	MOV CX,0H
YANSHI1:LOOP YANSHI1
	RET
DELAY1 ENDP
DELAY2 PROC FAR
	MOV BX,30H
YANSHI2:CALL DELAY1
	DEC BX
	CMP BX,0
	JNZ YANSHI2
	RET
DELAY2 ENDP

CODES ENDS
    END MAIN 

